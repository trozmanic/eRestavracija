<head>
    <title>InitDB</title>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        window.addEventListener('load', function () {
            document.getElementById('setDB').addEventListener('click', () => {

                axios.post('/api/registracija', {
                    "ime": "tempadmin",
                    "email_naslov": "tempadmin@aldente.si",
                    "geslo": "geslo1234",
                    "telefonska_stevilka": "456456456",
                    "vloga": "admin"
                }).then(odgovor => {
                    axios.defaults.headers.common['Authorization'] = 'Bearer ' + odgovor.data.token;
                    let id = JSON.parse(atob(odgovor.data.token.split('.')[1]))._id;
                    // menu item
                    axios.post('/api/meni', {
                        ime: 'hobotnica',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 124,
                        slika: '/images/jedi/2.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'egg',
                                kolicina: 100
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })


                    axios.post('/api/meni', {
                        ime: 'kalamari na zaru',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 224,
                        slika: '/images/jedi/3.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'egg',
                                kolicina: 100
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })

                    axios.post('/api/meni', {
                        ime: 'ocvrti kalamari',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 424,
                        slika: '/images/jedi/4.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'egg',
                                kolicina: 100
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })


                    axios.post('/api/meni', {
                        ime: 'morska solata',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 200,
                        slika: '/images/jedi/5.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'egg',
                                kolicina: 100
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })


                    axios.post('/api/meni', {
                        ime: 'tuna',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 370,
                        slika: '/images/jedi/7.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'tuna',
                                kolicina: 300
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })

                    axios.post('/api/meni', {
                        ime: 'rizota',
                        opis: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad, corrupti fugit! Ex expedita fugit velit delectus dolore numquam vitae, ab nam voluptates eius? Omnis necessitatibus inventore debitis voluptate nobis velit!',
                        kalorije: 230,
                        slika: '/images/jedi/7.png',
                        cena: 12,
                        sestavine: [
                            {
                                sestavina: 'riz',
                                kolicina: 250
                            },
                            {
                                sestavina: 'oli',
                                kolicina: 2
                            }
                        ]
                    }).catch((err) => {
                        console.log(err);
                    })

                    // surovine
                    const surovine=[ { "ime": "origano", "kolicina": 500, "enota": "g", "cena": 1 }, { "ime": "bazilika", "kolicina": 400, "enota": "g", "cena": 2 }, { "ime": "majaron", "kolicina": 600, "enota": "g", "cena": 2 }, { "ime": "krompir", "kolicina": 1, "enota": "kg", "cena": 4 }, { "ime": "voda", "kolicina": 5, "enota": "l", "cena": 34 }, { "ime": "sladkor", "kolicina": 4, "enota": "kg", "cena": 6 }, { "ime": "sol", "kolicina": 12, "enota": "kg", "cena": 32 }, { "ime": "čebula", "kolicina": 2, "enota": "kg", "cena": 6 }, { "ime": "česen", "kolicina": 1, "enota": "kg", "cena": 2 }, { "ime": "kumina", "kolicina": 3, "enota": "kg", "cena": 12 }, { "ime": "koruza", "kolicina": 1, "enota": "kg", "cena": 2 }, { "ime": "olje", "kolicina": 20, "enota": "l", "cena": 10 }, { "ime": "korenje", "kolicina": 3, "enota": "kg", "cena": 6 }, { "ime": "jajca", "kolicina": 15, "enota": "kg", "cena": 3 }, { "ime": "oves", "kolicina": 3, "enota": "kg", "cena": 4 }, { "ime": "maslo", "kolicina": 1, "enota": "kg", "cena": 5 }, { "ime": "pšenična moka", "kolicina": 3, "enota": "kg", "cena": 4 }, { "ime": "kakav", "kolicina": 3, "enota": "kg", "cena": 4 }, { "ime": "poper", "kolicina": 11, "enota": "kg", "cena": 19, }, { "ime": "postrv", "kolicina": 9, "enota": "kg", "cena": 9 }, { "ime": "losos", "kolicina": 6, "enota": "kg", "cena": 55 }, { "ime": "lignji", "kolicina": 26, "enota": "kg", "cena": 35 }, { "ime": "jogurt", "kolicina": 3, "enota": "l", "cena": 3 }, { "ime": "grški jogurt", "kolicina": 3, "enota": "l", "cena": 6 }, { "ime": "vinski kis", "kolicina": 5, "enota": "l", "cena": 10 }, { "ime": "jabolčni kis", "kolicina": 4, "enota": "l", "cena": 9 }, { "ime": "mleto meso", "kolicina": 3, "enota": "kg", "cena": 13 }, { "ime": "zrezek", "kolicina": 5, "enota": "kg", "cena": 23 }, { "ime": "sir", "kolicina": 2, "enota": "kg", "cena": 3 }, { "ime": "kruh", "kolicina": 1, "enota": "kg", "cena": 5 }, { "ime": "namaz", "kolicina": 3, "enota": "l", "cena": 2 } ];
                    for(surovina of surovine){
                        axios.post('/api/zaloga',surovina).catch((err)=>{console.log(err)});
                    }

                    axios.post('/api/registracija', {
                        ime: 'kuhar',
                        email_naslov: 'kuhar@aldente.si',
                        telefonska_stevilka: '070000878',
                        geslo: 'geslo1234',
                        vloga: 'kuhar'
                    }).catch((err) => {
                        console.log(err);
                    });

                    axios.post('/api/registracija', {
                        ime: 'natakar',
                        email_naslov: 'natakar@aldente.si',
                        telefonska_stevilka: '070000111',
                        geslo: 'geslo1234',
                        vloga: 'natakar'
                    }).catch((err) => {
                        console.log(err);
                    });

                    axios.post('/api/registracija', {
                        ime: 'gost',
                        email_naslov: 'gost@aldente.si',
                        telefonska_stevilka: '070000222',
                        geslo: 'geslo1234',
                        vloga: 'gost'
                    }).catch((err) => {
                        console.log(err);
                    });

                    axios.post('/api/registracija', {
                        ime: 'admin',
                        email_naslov: 'admin@aldente.si',
                        telefonska_stevilka: '070000333',
                        geslo: 'geslo1234',
                        vloga: 'admin'
                    });
                    return axios.delete('/api/uporabniki/'+id);
                }).then(odgovor=>{
                    alert('Podatkovna baza nastavljena');
                });
                
            });

            document.getElementById('dropDB').addEventListener('click', () => {
                axios.get('/api/database/drop').then((response) => {


                });
                alert('Vsebina baze izbrisana');
            });
        })
    </script>
</head>

<body>
    <div class="row">
        <div>
            <button id="setDB" class="btn btn-dark">Vnos zacetnih podatkov</button>
        </div>
        <br>
        <div>
            <button id="dropDB" class="btn btn-dark">Izbris vsebine podatkovne baze</button>
        </div>
    </div>
</body>